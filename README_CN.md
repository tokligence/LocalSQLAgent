# ğŸš€ LocalSQLAgent - æœ¬åœ°åŒ–æ™ºèƒ½Text-to-SQLä»£ç†ç³»ç»Ÿ

[![100% Local](https://img.shields.io/badge/Deployment-100%25_Local-success)](https://github.com/tokligence/LocalSQLAgent)
[![Zero API Cost](https://img.shields.io/badge/API_Cost-$0-green)](https://github.com/tokligence/LocalSQLAgent)
[![Model Size](https://img.shields.io/badge/Model-7B-blue)](https://github.com/tokligence/LocalSQLAgent)
[![Powered by Ollama](https://img.shields.io/badge/Powered_by-Ollama-orange)](https://ollama.com)
[![Python](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)

> ğŸ¯ **å¤šæ¬¡å°è¯•å¯æå‡ç¨³å®šæ€§ï¼Œä½†æå‡å¹…åº¦å› æ•°æ®è€Œå¼‚** â€” çœŸå®æ•ˆæœè¯·ä»¥ä½ çš„åŸºå‡†æµ‹è¯•ä¸ºå‡†ã€‚

[ä¸­æ–‡æ–‡æ¡£](README_CN.md) | [English](README.md)

## ğŸ—ï¸ éƒ¨ç½²æ¶æ„å¯¹æ¯”

### âŒ ä¼ ç»ŸCloudæ–¹æ¡ˆï¼ˆæ˜‚è´µã€éšç§é£é™©ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç”¨æˆ·è¾“å…¥   â”‚â”€â”€â”€â”€â–¶â”‚  å‘é€åˆ°äº‘ç«¯API ($$$)  â”‚â”€â”€â”€â”€â–¶â”‚  äº‘ç«¯GPT-4   â”‚
â”‚  "æŸ¥è¯¢..."   â”‚     â”‚   æ•°æ®ç¦»å¼€æœ¬åœ° âš ï¸     â”‚     â”‚  Claude API  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚                          â”‚
                               â–¼                          â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  æ•°æ®æš´éœ²é£é™© âš ï¸  â”‚      â”‚ æœˆè´¹$200-2000 ğŸ’¸ â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### âœ… LocalSQLAgentæ–¹æ¡ˆï¼ˆå…è´¹ã€éšç§ã€é«˜æ•ˆï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ğŸ  100% æœ¬åœ°éƒ¨ç½²ç¯å¢ƒ                           â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ç”¨æˆ·è¾“å…¥   â”‚â”€â”€â”€â”€â–¶â”‚  LocalSQLAgent  â”‚â”€â”€â”€â”€â–¶â”‚  Ollamaæœ¬åœ°æ¨¡å‹   â”‚   â”‚
â”‚  â”‚  "æŸ¥è¯¢..."  â”‚     â”‚   æ™ºèƒ½Agent      â”‚     â”‚ Qwen2.5-Coder:7B â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                         â”‚             â”‚
â”‚                              â–¼                         â–¼             â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                    â”‚  æ¨¡ç³Šæ£€æµ‹æ¨¡å—     â”‚     â”‚  å¤šæ¬¡å°è¯•ç­–ç•¥     â”‚   â”‚
â”‚                    â”‚  è¯¯æŠ¥ç‡å¯è°ƒ       â”‚     â”‚  æ˜¾è‘—æå‡å‡†ç¡®ç‡   â”‚   â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                         â”‚             â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                       â–¼                              â”‚
â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚                           â”‚   åŠ¨æ€Schemaå‘ç°      â”‚                   â”‚
â”‚                           â”‚  (å®æ—¶æ•°æ®åº“åˆ†æ)     â”‚                   â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                       â”‚                              â”‚
â”‚                                       â–¼                              â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚     â”‚              æœ¬åœ°æ•°æ®åº“ (æ•°æ®ä¸ç¦»å¼€æœ¬åœ°)               â”‚        â”‚
â”‚     â”‚  PostgreSQL â”‚ MySQL â”‚ MongoDB â”‚ ClickHouse â”‚ SQLite  â”‚        â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                      â”‚
â”‚  ä¼˜åŠ¿ï¼šğŸ’° $0æˆæœ¬  ğŸ”’ 100%éšç§  âš¡ 1-3ç§’/æ¬¡  ğŸ“ˆ å¤šæ¬¡å°è¯•æå‡         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ ç³»ç»Ÿå·¥ä½œæµç¨‹

```mermaid
graph LR
    A[è‡ªç„¶è¯­è¨€æŸ¥è¯¢] --> B{æ¨¡ç³Šæ£€æµ‹}
    B -->|æ¸…æ™°| C[Schemaå‘ç°]
    B -->|æ¨¡ç³Š| D[è¯·æ±‚æ¾„æ¸…]
    D --> C
    C --> E[SQLç”Ÿæˆ]
    E --> F{æ‰§è¡ŒSQL}
    F -->|æˆåŠŸ| G[è¿”å›ç»“æœ]
    F -->|å¤±è´¥| H[é”™è¯¯å­¦ä¹ ]
    H --> I[è°ƒæ•´ç­–ç•¥]
    I --> E

    style A fill:#e1f5fe
    style G fill:#c8e6c9
    style B fill:#fff9c4
    style H fill:#ffccbc
```

## ğŸ“Š æ ¸å¿ƒæˆæœ

### ğŸš€ å¤šæ¬¡å°è¯•ç­–ç•¥æ•ˆæœï¼ˆçœŸå®åŸºå‡†ï¼‰
æ•°æ®é›†ï¼šSpider devï¼ˆå‰100æ¡ï¼‰ã€‚æ¨¡å‹ï¼š`qwen2.5-coder:7b`ï¼ˆOllamaï¼‰ã€‚æˆåŠŸå³åœæ­¢ã€‚æ¸©åº¦ï¼š1æ¬¡=0.0ï¼Œ5/7æ¬¡=0.2ã€‚

**æœ¬æœºï¼ˆvenvï¼‰**
| æœ€å¤§å°è¯•æ¬¡æ•° | æ‰§è¡Œå‡†ç¡®ç‡ | ç²¾ç¡®åŒ¹é… | å¹³å‡è€—æ—¶ | å¹³å‡å°è¯•æ¬¡æ•° |
|-------------|-----------|---------|---------|-------------|
| 1æ¬¡ | 84% | 3% | 2.43s | 1.00 |
| 5æ¬¡ | 85% | 4% | 3.97s | 1.66 |
| 7æ¬¡ | 85% | 4% | 4.79s | 1.94 |

**Dockerï¼ˆæœ¬åœ°é•œåƒæ ‡ç­¾ `localsqlagent-api`ï¼‰**
| æœ€å¤§å°è¯•æ¬¡æ•° | æ‰§è¡Œå‡†ç¡®ç‡ | ç²¾ç¡®åŒ¹é… | å¹³å‡è€—æ—¶ | å¹³å‡å°è¯•æ¬¡æ•° |
|-------------|-----------|---------|---------|-------------|
| 1æ¬¡ | 84% | 3% | 2.56s | 1.00 |
| 5æ¬¡ | 84% | 2% | 4.22s | 1.66 |
| 7æ¬¡ | 84% | 3% | 4.77s | 1.96 |

**å…³é”®å‘ç°**ï¼šåœ¨è¯¥å­é›†ä¸­ï¼Œå¤šæ¬¡å°è¯•ä»…å¸¦æ¥è½»å¾®æå‡ï¼ˆ84% â†’ 85%ï¼‰ï¼Œä½†è€—æ—¶å¢åŠ æ˜æ˜¾ã€‚

**BIRD dev**ï¼š`bird-bench.oss-cn-beijing.aliyuncs.com/dev.zip` åœ¨å½“å‰ç¯å¢ƒä¸‹è½½å¤±è´¥ï¼ŒHugging Face çš„ mini-dev ä¸å« SQLite æ•°æ®åº“/Schemaï¼Œæ— æ³•æ‰§è¡Œè¯„æµ‹ã€‚è¯·å°†å®Œæ•´ BIRD dev æ•°æ®æ”¾å…¥ `data/bird` åå†è¿è¡Œ `--benchmark bird`ã€‚

å¤ç°ï¼ˆSpider dev å­é›†ï¼‰ï¼š
```bash
python benchmarks/sql_benchmark.py --model ollama --model-name qwen2.5-coder:7b \
  --benchmark spider --limit 100 --max-attempts 5 --temperature 0.2
```

### âœ… é›†æˆæµ‹è¯•ï¼ˆLive Servicesï¼‰
è¿è¡Œï¼š
```bash
pytest tests/integration/test_schema_discovery_mysql_clickhouse.py \
  tests/integration/test_multi_statement_execution.py \
  tests/integration/test_multi_schema_postgres.py \
  tests/integration/test_live_services_smoke.py -q
```
æœ€æ–°ä¸€æ¬¡è¿è¡Œï¼ˆmacOSï¼Œæœ¬åœ°Dockerï¼Œ2026-01-16ï¼‰ï¼š`7 passed`ã€‚

### å¤šæ•°æ®åº“åŸºå‡†ï¼ˆéœ€è‡ªè¡Œè¿è¡Œï¼‰
PostgreSQL/MySQL/ClickHouse/MongoDB çš„å‡†ç¡®ç‡å— schemaã€æ•°æ®åˆ†å¸ƒä¸æ¨¡å‹ç‰ˆæœ¬å½±å“è¾ƒå¤§ã€‚è¯·ç»“åˆä½ çš„æ•°æ®è¿è¡Œé›†æˆæµ‹è¯•ä¸åŸºå‡†è„šæœ¬ã€‚

## ğŸ’¡ ä¸ºä»€ä¹ˆé€‰æ‹©æœ¬åœ°éƒ¨ç½²ï¼Ÿ

### ğŸ†š æˆæœ¬å¯¹æ¯”ï¼ˆæœˆåº¦ï¼‰
| è§£å†³æ–¹æ¡ˆ | APIæˆæœ¬ | æœåŠ¡å™¨æˆæœ¬ | æ€»æˆæœ¬ | æ•°æ®éšç§ |
|----------|---------|-----------|--------|----------|
| **LocalSQLAgent** | **$0** | **$0** | **$0** âœ… | **100%æœ¬åœ°** ğŸ”’ |
| GPT-4 API | $200-2000 | $0 | $200-2000 | æ•°æ®ä¸Šä¼ äº‘ç«¯ âš ï¸ |
| Claude API | $150-1500 | $0 | $150-1500 | æ•°æ®ä¸Šä¼ äº‘ç«¯ âš ï¸ |
| è‡ªå»ºGPT | $0 | $5000+ (A100) | $5000+ | éœ€è¦ä¸“ä¸šè¿ç»´ |

### ğŸš€ æ€§èƒ½å¯¹æ¯”ï¼ˆå®æµ‹ï¼šSpider dev å‰100æ¡ï¼‰
```
ç¡¬ä»¶éœ€æ±‚ï¼šæ™®é€šç¬”è®°æœ¬ç”µè„‘ï¼ˆ8GB RAMï¼‰
æ¨¡å‹å¤§å°ï¼š7Bå‚æ•°ï¼ˆ4GBç£ç›˜ç©ºé—´ï¼‰
å“åº”æ—¶é—´ï¼šæ¯æ¬¡å°è¯•1-3ç§’

å¤šæ¬¡å°è¯•ç­–ç•¥çš„å‡†ç¡®ç‡æå‡ï¼š
â€¢ 1æ¬¡å°è¯•ï¼šæ‰§è¡Œå‡†ç¡®ç‡84%
â€¢ 5æ¬¡å°è¯•ï¼šæ‰§è¡Œå‡†ç¡®ç‡85%
â€¢ 7æ¬¡å°è¯•ï¼šæ‰§è¡Œå‡†ç¡®ç‡85%
â€¢ æ—¶é—´æƒè¡¡ï¼šå¹³å‡è€—æ—¶çº¦2.4s â†’ 4.8s

å¹¶å‘æ”¯æŒï¼š10+ QPS
```

### ğŸ”’ ä¼ä¸šçº§ä¼˜åŠ¿
- âœ… **æ•°æ®åˆè§„** - GDPR/HIPAAå®Œå…¨åˆè§„ï¼Œæ•°æ®ä¸å‡ºä¼ä¸šç½‘ç»œ
- âœ… **ç¦»çº¿å¯ç”¨** - æ— éœ€äº’è”ç½‘è¿æ¥ï¼Œé€‚åˆé«˜å®‰å…¨ç¯å¢ƒ
- âœ… **æˆæœ¬å¯æ§** - ä¸€æ¬¡éƒ¨ç½²ï¼Œæ°¸ä¹…ä½¿ç”¨ï¼Œæ— è®¢é˜…è´¹ç”¨
- âœ… **å®šåˆ¶è‡ªç”±** - å¯é’ˆå¯¹ä¸šåŠ¡åœºæ™¯å¾®è°ƒæ¨¡å‹

## ğŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆ2åˆ†é’Ÿæœ¬åœ°éƒ¨ç½²ï¼‰

### âš¡ ä½¿ç”¨Makefileä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰
```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/tokligence/LocalSQLAgent.git
cd LocalSQLAgent

# 2. ä¸€é”®å®‰è£…å’Œå¯åŠ¨
make start        # è‡ªåŠ¨å®‰è£…Ollamaã€ä¸‹è½½æ¨¡å‹ã€å¯åŠ¨æ•°æ®åº“
make quick-start  # è¿è¡Œæ¼”ç¤º

# å…¶ä»–æœ‰ç”¨å‘½ä»¤
make help         # æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤
make benchmark    # è¿è¡Œå®Œæ•´åŸºå‡†æµ‹è¯•
make clean        # æ¸…ç†æ‰€æœ‰å®¹å™¨å’Œæ•°æ®
```

### ğŸ› ï¸ æ‰‹åŠ¨å®‰è£…ï¼ˆå¦‚éœ€è‡ªå®šä¹‰ï¼‰
```bash
# 1. å®‰è£…Ollama
curl -fsSL https://ollama.com/install.sh | sh

# 2. ä¸‹è½½æ¨¡å‹ï¼ˆä»…éœ€4GBï¼Œä¸€æ¬¡ä¸‹è½½æ°¸ä¹…ä½¿ç”¨ï¼‰
ollama pull qwen2.5-coder:7b

# 3. å¯åŠ¨æ•°æ®åº“ï¼ˆå¯é€‰ï¼‰
docker-compose up -d

# 4. å®‰è£…ä¾èµ–å¹¶è¿è¡Œ
pip install -r requirements.txt
python quick_start.py
```

**å°±è¿™ä¹ˆç®€å•ï¼** æ— éœ€APIå¯†é’¥ï¼Œæ— éœ€äº‘æœåŠ¡ï¼Œæ— éœ€ä¿¡ç”¨å¡ ğŸ‰

### ğŸ¯ ç«‹å³ä½“éªŒ
```python
# quick_start.py ä¼šè‡ªåŠ¨æ¼”ç¤ºï¼š
>>> æŸ¥è¯¢: "æŸ¥è¯¢æ‰€æœ‰VIPå®¢æˆ·çš„è®¢å•"
âœ… æ£€æµ‹åˆ°æ¨¡ç³Š: 'VIPå®¢æˆ·' éœ€è¦æ¾„æ¸…
   å»ºè®®: ['å¹´æ¶ˆè´¹>10000', 'ä¼šå‘˜ç­‰çº§=VIP', 'è¿‘æœŸé«˜é¢‘å®¢æˆ·']

>>> æŸ¥è¯¢: "ç»Ÿè®¡2024å¹´1æœˆçš„é”€å”®é¢"
âœ… æŸ¥è¯¢æ˜ç¡®ï¼Œç”ŸæˆSQLä¸­...
SELECT SUM(amount) FROM orders WHERE date >= '2024-01-01' AND date < '2024-02-01'
âš¡ æ‰§è¡Œæ—¶é—´: 1.2ç§’ | ğŸ’° APIæˆæœ¬: $0.00
```

### ğŸ“¦ å®Œæ•´éƒ¨ç½²ï¼ˆåŒ…å«æ•°æ®åº“ï¼‰
```bash
# å¦‚éœ€æµ‹è¯•çœŸå®æ•°æ®åº“ï¼ˆå¯é€‰ï¼‰
docker-compose up -d  # å¯åŠ¨PostgreSQL, MySQL, MongoDBç­‰

# è¿è¡Œå®Œæ•´åŸºå‡†æµ‹è¯•
python benchmarks/sql_benchmark.py --model ollama:qwen2.5-coder:7b
```

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
text2sql2026/
â”œâ”€â”€ src/                        # æ ¸å¿ƒæºä»£ç 
â”‚   â”œâ”€â”€ core/                   # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ambiguity_detection.py    # æ¨¡ç³ŠæŸ¥è¯¢æ£€æµ‹
â”‚   â”‚   â”œâ”€â”€ intelligent_agent.py      # æ™ºèƒ½Agent
â”‚   â”‚   â””â”€â”€ schema_discovery.py       # Schemaå‘ç°
â”‚   â”œâ”€â”€ agents/                 # Agentå®ç°
â”‚   â””â”€â”€ mongodb/                # MongoDBä¸“ç”¨
â”œâ”€â”€ benchmarks/                 # åŸºå‡†æµ‹è¯•
â”œâ”€â”€ examples/                   # ç¤ºä¾‹ä»£ç 
â”œâ”€â”€ tests/                      # æµ‹è¯•å¥—ä»¶
â””â”€â”€ docs/                       # æ–‡æ¡£
```

## ğŸ’¡ æ ¸å¿ƒç‰¹æ€§

### 1. åŠ¨æ€Schemaå‘ç°
- **è‡ªåŠ¨å‘ç°æ•°æ®åº“ç»“æ„** - æ— éœ€ç¡¬ç¼–ç Schema
- **å­—æ®µå«ä¹‰æ¨æ–­** - åŸºäºå­—æ®µåå’Œæ ·æœ¬æ•°æ®
- **å…³ç³»å‘ç°** - è‡ªåŠ¨è¯†åˆ«è¡¨é—´å…³ç³»

### 2. æ¨¡ç³ŠæŸ¥è¯¢å¤„ç†
- **æ™ºèƒ½è¯†åˆ«æ¨¡ç³Šè¡¨è¾¾** - "æœ€è¿‘"ã€"çƒ­é—¨"ç­‰
- **è¯¯æŠ¥ç‡æ§åˆ¶** - å¤šå±‚éªŒè¯æœºåˆ¶ï¼Œéœ€æŒ‰ä¸šåŠ¡è°ƒå‚
- **äº¤äº’å¼æ¾„æ¸…** - ä¸»åŠ¨è¯¢é—®ç”¨æˆ·æ„å›¾

### 3. å¤šç­–ç•¥æ‰§è¡Œ
- **è‡ªé€‚åº”ç­–ç•¥é€‰æ‹©** - æ ¹æ®æŸ¥è¯¢å¤æ‚åº¦é€‰æ‹©æœ€ä¼˜ç­–ç•¥
- **é”™è¯¯æ¢å¤æœºåˆ¶** - å¤šæ¬¡å°è¯•ï¼Œä»é”™è¯¯ä¸­å­¦ä¹ 
- **ç¼“å­˜ä¼˜åŒ–** - æ™ºèƒ½ç¼“å­˜æå‡å“åº”é€Ÿåº¦

### 4. UI ä¸å®‰å…¨ç­–ç•¥
- **Schemaé¢„è§ˆ** - â€œExplore the databaseâ€ ç›´æ¥å±•ç¤ºç»“æ„å¡ç‰‡
- **å¤šåº“é€‰æ‹©** - UIæ”¯æŒä¸€æ¬¡é€‰å¤šä¸ªæ•°æ®åº“å¹¶å¯¹æ¯”ç»“æœ
- **å®‰å…¨å¼€å…³** - é»˜è®¤åªè¯» + LIMIT é˜²æŠ¤ï¼Œå¯å¼€å¯DDL/DML
- **Schemaæ§åˆ¶** - å¯é…ç½®æ ·æœ¬/è¡Œæ•°ä¸schemaè¿‡æ»¤

### å…¥å£è¯´æ˜
- `web/api_server.py` â€” OpenAIå…¼å®¹APIï¼ˆç”Ÿäº§å…¥å£ï¼‰
- `web/app.py` â€” Streamlit UIï¼ˆäº¤äº’å…¥å£ï¼‰

### 5. MCPé›†æˆï¼ˆå¯é€‰ï¼‰
- **ç»Ÿä¸€æ¥å£** - æ”¯æŒå¤šæ•°æ®æº
- **å®æ—¶Schemaæ›´æ–°** - åŠ¨æ€è·å–æœ€æ–°ç»“æ„
- **æ€§èƒ½ä¼˜åŒ–** - ç¼“å­˜å’Œæ‰¹å¤„ç†
- **è¯´æ˜** - MCPæœåŠ¡ç«¯ä¸éšä»“åº“æä¾›ï¼Œéœ€è‡ªè¡Œéƒ¨ç½²

## ğŸ“ˆ æ€§èƒ½å¯¹æ¯”

### å…³é”®å‘ç°ï¼ˆä»¥ä½ çš„åŸºå‡†ä¸ºå‡†ï¼‰
1. **æ¨¡å‹é€‰æ‹©å½±å“å·¨å¤§** - éœ€åœ¨ä½ çš„æ•°æ®ä¸Šå¯¹æ¯”ä¸åŒæ¨¡å‹
2. **Schemaè´¨é‡æ˜¯æ ¸å¿ƒå‰æ** - åŠ¨æ€Schemaä¸æ¸…æ™°å­—æ®µå‘½åæ˜¾è‘—æå‡ç¨³å®šæ€§
3. **æŸ¥è¯¢æ˜ç¡®åº¦å†³å®šæˆåŠŸç‡** - éœ€è¦æ¾„æ¸…æœºåˆ¶æˆ–å‰ç½®çº¦æŸ

### æ”¹è¿›å»ºè®®
- SQLæŸ¥è¯¢ï¼šç»“åˆçœŸå®ä¸šåŠ¡æ•°æ®æŒç»­å›å½’æµ‹è¯•
- MongoDB/å¤æ‚æŸ¥è¯¢ï¼šå»ºè®®å¼•å…¥æ¨¡æ¿æˆ–è§„åˆ™è¾…åŠ©

## ğŸ“š æ–‡æ¡£

- [ç ”ç©¶æŠ¥å‘Š](docs/research/) - æ¨¡å‹è¯„æµ‹å’ŒæŠ€æœ¯è°ƒç ”
- [åˆ†ææŠ¥å‘Š](docs/analysis/) - MongoDBæµ‹è¯•åˆ†æã€è¯¯æŠ¥åˆ†æç­‰
- [APIæ–‡æ¡£](docs/api/) - æ¥å£è¯´æ˜ï¼ˆå¼€å‘ä¸­ï¼‰

## ğŸ› ï¸ é«˜çº§ç”¨æ³•

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

```python
from src.core.intelligent_agent import IntelligentSQLAgent

# åˆå§‹åŒ–Agent
agent = IntelligentSQLAgent(
    model_name="qwen2.5-coder:7b",
    db_config={"type": "postgresql", ...},
    mcp_server="http://localhost:8080"  # å¯é€‰
)

# æ‰§è¡ŒæŸ¥è¯¢
result = agent.execute_query("æ‰¾å‡ºæœ€è¿‘è´­ä¹°çš„VIPå®¢æˆ·")
```

### è‡ªå®šä¹‰é…ç½®

```python
# è°ƒæ•´æ¨¡ç³Šæ£€æµ‹é˜ˆå€¼
detector = AmbiguityDetector(confidence_threshold=0.8)

# ä½¿ç”¨æ›´å¤šé‡è¯•æ¬¡æ•°
agent = IntelligentSQLAgent(
    model_name="qwen2.5-coder:7b",
    db_config={"type": "postgresql", ...},
    max_attempts=7
)
```

## ğŸ”§ é…ç½®é€‰é¡¹

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `model_name` | qwen2.5-coder:7b | LLMæ¨¡å‹ |
| `max_attempts` | 5 | æœ€å¤§é‡è¯•æ¬¡æ•° |
| `confidence_threshold` | 0.75 | æ¨¡ç³Šæ£€æµ‹é˜ˆå€¼ |
| `cache_ttl` | 3600 | ç¼“å­˜è¿‡æœŸæ—¶é—´(ç§’) |

LLM æ¸©åº¦/æœ€å¤§ tokens å¯åœ¨ `~/.tokligence/llm_config.json` æˆ–ç¯å¢ƒå˜é‡ï¼ˆå¦‚ `OLLAMA_TEMPERATURE`ï¼‰ä¸­è®¾ç½®ï¼›`schema_options` å¯é€šè¿‡ API æˆ– UI é…ç½®ã€‚

## ğŸŒŸ ä¸Ollamaç”Ÿæ€å®Œç¾é›†æˆ

LocalSQLAgentæ˜¯Ollamaç”Ÿæ€ç³»ç»Ÿçš„åŸç”Ÿåº”ç”¨ï¼š
```bash
# æ”¯æŒæ‰€æœ‰Ollamaæ¨¡å‹
ollama pull qwen2.5-coder:7b      # æ¨èï¼šæœ€ä½³æ•ˆæœ
ollama pull deepseek-coder:6.7b   # å¤‡é€‰ï¼šä¹Ÿå¾ˆä¸é”™
ollama pull sqlcoder:7b            # ä¸“ç”¨ï¼šSQLä¸“é—¨æ¨¡å‹

# ä¸€è¡Œä»£ç åˆ‡æ¢æ¨¡å‹
python benchmarks/sql_benchmark.py --model ollama:deepseek-coder:6.7b
```

## ğŸ¯ æ ¸å¿ƒåˆ›æ–°ç‚¹

1. **ğŸ§  æ™ºèƒ½Agentç­–ç•¥** - ä¸åªæ˜¯å•æ¬¡ç”Ÿæˆï¼Œè€Œæ˜¯åƒäººç±»ä¸€æ ·å¤šæ¬¡å°è¯•å’Œå­¦ä¹ 
2. **ğŸ” æ¨¡ç³Šæ£€æµ‹** - ä¸šç•Œé¦–ä¸ªé›†æˆæ¨¡ç³ŠæŸ¥è¯¢æ£€æµ‹çš„Text2SQLç³»ç»Ÿ
3. **ğŸ“Š åŠ¨æ€Schema** - å®æ—¶åˆ†ææ•°æ®åº“ç»“æ„ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®
4. **ğŸ  çº¯æœ¬åœ°è¿è¡Œ** - ä½¿ç”¨Ollamaå®ç°å®Œå…¨æœ¬åœ°åŒ–éƒ¨ç½²
5. **ğŸ’° é›¶æˆæœ¬è¿è¥** - æ— ä»»ä½•APIè°ƒç”¨è´¹ç”¨ï¼Œä¸€æ¬¡éƒ¨ç½²æ°¸ä¹…ä½¿ç”¨

## ğŸ“ˆ æ ¸å¿ƒä¼˜åŠ¿

- **é›¶æˆæœ¬è¿è¡Œ** - ä½¿ç”¨Ollamaæœ¬åœ°æ¨¡å‹ï¼Œæ— éœ€æ”¯ä»˜APIè´¹ç”¨
- **æ•°æ®éšç§ä¿æŠ¤** - æ‰€æœ‰æ•°æ®å¤„ç†éƒ½åœ¨æœ¬åœ°å®Œæˆï¼Œé€‚åˆæ•æ„Ÿæ•°æ®åœºæ™¯
- **ç¦»çº¿å¯ç”¨** - ä¸ä¾èµ–äº’è”ç½‘è¿æ¥ï¼Œå¯åœ¨éš”ç¦»ç¯å¢ƒè¿è¡Œ
- **å¿«é€Ÿå“åº”** - æœ¬åœ°æ¨ç†å»¶è¿Ÿä½ï¼Œ1-3ç§’å³å¯ç”ŸæˆSQL


## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼ç‰¹åˆ«æ¬¢è¿ï¼š
- æ–°æ•°æ®åº“é€‚é…å™¨
- æ›´å¤šOllamaæ¨¡å‹æµ‹è¯•
- ä¼ä¸šçº§åŠŸèƒ½éœ€æ±‚
- æ€§èƒ½ä¼˜åŒ–å»ºè®®
- æ–‡æ¡£æ”¹è¿›

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE)

## ğŸ™ è‡´è°¢

- **Ollamaå›¢é˜Ÿ** - æä¾›ä¼˜ç§€çš„æœ¬åœ°æ¨¡å‹éƒ¨ç½²æ–¹æ¡ˆ
- **Qwenå›¢é˜Ÿ** - Qwen2.5-Coderæ¨¡å‹æ•ˆæœå“è¶Š
- **å¼€æºç¤¾åŒº** - æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…

---

<div align="center">

### ğŸ¢ ç”± [Tokligence](https://github.com/tokligence) å¼€å‘
*ä¸ºæœ¬åœ°AIç”Ÿæ€ç³»ç»Ÿæ„å»ºæ™ºèƒ½å·¥å…·*

ğŸŒŸ **å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªStarï¼**

</div>

**æ ‡ç­¾**: #text-to-sql #ollama #local-llm #qwen-coder #zero-cost #privacy-first #sql-agent #mongodb
